package com.qa.opecart.tests;

import static org.testng.Assert.assertEquals;

import java.util.List;

import org.testng.Assert;
import org.testng.annotations.BeforeTest;
import org.testng.annotations.DataProvider;
import org.testng.annotations.Test;

import com.qa.opencart.pages.LoginPage;
import com.qa.opencart.utils.Constants;

public class AccountsPageTest extends BaseTest {

	@BeforeTest
	public void accPageSetup()
	{
	accountPage =loginpage.doLogin(prop.getProperty("username"), prop.getProperty("passwword"));
	}
	
	@Test
	public void accPageTitleTest()
	{
	String actTitle	= accountPage.getAccountPageTitle();
	System.out.println(actTitle);
	
	Assert.assertEquals(actTitle, Constants.ACCOUNT_PAGE_TITLE);
	}
	
	@Test
	public void accPageHeaderTest()
	{
		String Header = accountPage.getAccountsPageHeader();
		System.out.println(Header);
		
		Assert.assertEquals(Header, Constants.ACCOUNT_PAGE_HEADER);
	}
	
	@Test
	public void isLogoutExistsTest()
	{
		Assert.assertTrue(accountPage.isLogoutLinkExists());
	}
	
	@Test
	public void accPageSecTest()
	{
		List<String> accSecList = accountPage.getAccountSecList();
		Assert.assertEquals(accSecList, Constants.getExpectedAccSecList());
	}
	
	@DataProvider
	public Object[][] productData()
	{
	return new Object[][]
	{
		{"MacBook pro"},
		{"MacBook pro"},
		{"MacBook pro"},
	};
	}
	
	@Test(priority =5, dataProvider ="productData")
	public void SearchTest(String productName)
	{
		accountPage.doSearch(productName);
	}
	
	@Test()
	public void loginTest()
	{
		accountPage = loginpage.doLogin(prop.getProperty("username").trim(), prop.getProperty("password").trim());
		Assert.assertEquals(accountPage.getAccountPageTitle(), Constants.ACCOUNT_PAGE_TITLE);
	}
}
